(this["webpackJsonprich-text-editor-survey"]=this["webpackJsonprich-text-editor-survey"]||[]).push([[0],{209:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(36),c=n.n(a),i=(n(93),n(9)),u=n(5),l=n(86),s=function(e){var t=e.type,n=e.key;return{onKeyDown:function(e,r,o){if(!e.metaKey||e.key!==n)return o();e.preventDefault(),r.toggleMark(t)}}},p=function(e){return{renderMark:function(t,n,r){return t.mark.type===e.type?e.component(t):r()}}},f=function(e){return[s(e),p(e)]},d=[].concat(Object(u.a)(f({type:"bold",key:"b",component:function(e){return o.a.createElement("strong",e.attribute,e.children)}})),Object(u.a)(f({type:"strikethrough",key:"s",component:function(e){return o.a.createElement("s",e.attribute,e.children)}})),Object(u.a)(f({type:"underline",key:"u",component:function(e){return o.a.createElement("u",e.attribute,e.children)}})),Object(u.a)(f({type:"italic",key:"i",component:function(e){return o.a.createElement("i",e.attribute,e.children)}})),Object(u.a)(f({type:"highlight",key:"h",component:function(e){return o.a.createElement("span",Object.assign({},e.attribute,{style:{background:"gold"}}),e.children)}}))),y=n(11);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=function(e){var t=e.type,n=e.key;return{onKeyDown:function(e,r,o){if(!e.ctrlKey||e.key!==n)return o();e.preventDefault();var a=r.value.blocks.some((function(e){return e.type===t}));r.setBlocks({type:a?"paragraph":t})}}},v=function(e){var t=e.type,n=e.component;return{renderBlock:function(e,r,o){return e.node.type===t?n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)):o()}}},g=function(e){var t=e.type,n=e.key,r=e.component;return[b({type:t,key:n}),v({type:t,component:r})]},h=[].concat(Object(u.a)(g({type:"code",key:"c",component:function(e){return o.a.createElement("pre",e.attribute,o.a.createElement("code",null,e.children))}})),Object(u.a)(g({type:"header1",key:"1",component:function(e){return o.a.createElement("h1",e.attribute,e.children)}})),Object(u.a)(g({type:"header2",key:"2",component:function(e){return o.a.createElement("h2",e.attribute,e.children)}})),Object(u.a)(g({type:"header3",key:"3",component:function(e){return o.a.createElement("h3",e.attribute,e.children)}})),Object(u.a)(g({type:"header4",key:"4",component:function(e){return o.a.createElement("h4",e.attribute,e.children)}})),Object(u.a)(g({type:"header5",key:"5",component:function(e){return o.a.createElement("h5",e.attribute,e.children)}})),Object(u.a)(g({type:"header6",key:"6",component:function(e){return o.a.createElement("h6",e.attribute,e.children)}})),Object(u.a)(g({type:"quotation",key:"q",component:function(e){return o.a.createElement("blockquote",e.attribute,e.children)}}))),O={queries:{getLastWord:function(e){if(e.value.focusText){var t=e.value.focusText.text,n=e.value.selection.focus.offset;return t.slice(0,n).split("\n").join("").split(" ").reverse()[0]}return""}},commands:{replaceLastWord:function(e,t){var n=e.getLastWord();n&&"string"===typeof t&&e.deleteBackward(n.length).insertText(t)}}};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=function(e){var t=e.select,n=e.firstChild,r=e.lastChild;return Object.assign({},{backgroundColor:"white",color:"gray",padding:"7px 14px 7px 7px",fontWeight:"bold",border:"1px solid transparent",cursor:"pointer"},t?{backgroundColor:"gray",color:"white",borderTop:"1px dashed white",borderBottom:"1px dashed white"}:{},n?{borderTop:"1px solid transparent"}:{},r?{borderBottom:"1px solid transparent"}:{})},k=function(e){var t={value:[],clear:function(){t.value=[]}},n=function(e){var n=e.editor,r=o.a.useState(!1),a=Object(i.a)(r,2),c=a[0],u=a[1],l=o.a.useState(0),s=Object(i.a)(l,2),p=s[0],f=s[1],d=o.a.useState(0),y=Object(i.a)(d,2),m=y[0],b=y[1],v=o.a.useState(0),g=Object(i.a)(v,2),h=g[0],O=g[1],E=o.a.useRef(null);o.a.useEffect((function(){var e=function(e){var n=e.editor,r=e.index;return function(e){switch(e.detail.instruction){case"open":!function(){try{var e=window.getSelection().getRangeAt(0).getBoundingClientRect();b(e.left),O(e.bottom)}catch(t){console.log("uncaught caret position")}}(),f(0),u(!0);break;case"close":u(!1),f(0);break;case"incre":var o=(r+1)%t.value.length||0;f(o),E.current&&E.current.children[o].scrollIntoView({block:"nearest",inline:"nearest"});break;case"decre":var a=(r-1+t.value.length)%t.value.length||0;f(a),E.current&&E.current.children[a].scrollIntoView({block:"nearest",inline:"nearest"});break;case"enter":t.value[r]&&n.replaceLastWord(t.value[r]).insertText(" "),f(0),u(!1);break;default:console.log("unhandled event:",e)}}}({index:p,editor:n});return document.addEventListener("editorEmittedEvent",e),function(){document.removeEventListener("editorEmittedEvent",e)}}),[n,p]);var k,x=function(e){return function(r){r.preventDefault(),f(e),u(!1),n.replaceLastWord(t.value[e])}},w=function(e){return function(t){t.preventDefault(),f(e)}};return t.value.length?o.a.createElement("div",{ref:E,style:(k={open:c,xOffset:m,yOffset:h},{display:k.open?"flex":"none",flexFlow:"column",overflow:"scroll",maxHeight:"136px",minWidth:"100px",position:"fixed",left:k.xOffset,top:k.yOffset,transform:"translate3d(-5px,5px,0)",border:"1px dashed gray"})},t.value.map((function(e,n){return o.a.createElement("div",{key:n,onMouseOver:w(n),onMouseDown:x(n),style:j({select:p===n,firstChild:0===n,lastChild:n===t.value.length-1})},e)}))):null};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},O,{},function(){var n=function(e){return new window.CustomEvent("editorEmittedEvent",{detail:{instruction:e}})};return{onKeyDown:function(r,o,a){if(r.keyCode>=65&&r.keyCode<=90&&!r.ctrlKey&&!r.metaKey){var c=function(e,t){return e?e.split("").reduceRight((function(e,t,n){return e[0]?[t+e[0]].concat(Object(u.a)(e)):[t]}),[]).reduce((function(e,n){return t[n]?[].concat(Object(u.a)(e),[t[n]]):Object(u.a)(e)}),[]):[]}(o.getLastWord()+r.key||"",e);return t.value=c,document.dispatchEvent(n("open")),a()}if(!t.value.length)return a();switch(r.keyCode){case 38:return r.preventDefault(),void document.dispatchEvent(n("decre"));case 40:return r.preventDefault(),void document.dispatchEvent(n("incre"));case 13:return r.preventDefault(),document.dispatchEvent(n("enter")),void t.clear();default:return document.dispatchEvent(n("close")),t.clear(),a()}},onMouseDown:function(e,t,r){return document.dispatchEvent(n("close")),r()}}}(),{renderEditor:function(e,t,r){return o.a.createElement(o.a.Fragment,null,r(),o.a.createElement(n,{editor:t}))}})},x={display:"flex",justifyContent:"space-between",alignItems:"center"},w={display:"flex"},C=function(e){var t=e.topLeftItems,n=e.topRightItems,r=e.bottomLeftItems,a=e.bottomRightItems;return{renderEditor:function(e,c,i){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:x},o.a.createElement("div",{style:w},t.map((function(e,t){return o.a.createElement("div",{key:t},e(c))}))),o.a.createElement("div",{style:w},n.map((function(e,t){return o.a.createElement("div",{key:t},e(c))})))),i(),o.a.createElement("div",{style:x},o.a.createElement("div",{style:w},o.a.createElement("div",{style:w},r.map((function(e,t){return o.a.createElement("div",{key:t},e(c))})))),o.a.createElement("div",{style:w},o.a.createElement("div",{style:w},a.map((function(e,t){return o.a.createElement("div",{key:t},e(c))}))))))}}},D=function(e){var t=e.active;e.mouseover;return{margin:"10px 5px",backgroundColor:t?"gray":"transparent",color:t?"white":"black",fontFamily:'source-code-pro, Menlo, Monaco, Consolas, "Courier New",monospace',fontWeight:"bold",padding:"5px",border:0,cursor:"pointer"}},S=function(e){var t=e.mouseDownHandler,n=e.styleHandler;return function(e){var r=e.editor,a=e.label;return o.a.createElement("button",{style:n(r),onMouseDown:t(r)},a)}},M=function(e){var t=e.type,n=e.label;return function(e){return function(e){var t=e.type;return S({mouseDownHandler:function(e){return function(n){n.preventDefault(),e.toggleMark({type:t})}},styleHandler:function(e){return function(e,t){return e.value.activeMarks.some((function(e){return e.type===t}))}(e,t)?D({active:!0}):D({active:!1})}})}({type:t})({editor:e,label:n})}},P=function(e){var t=e.type,n=e.label;return function(e){return function(e){var t=e.type;return S({mouseDownHandler:function(e){return function(n){n.preventDefault(),e.setBlocks({type:t})}},styleHandler:function(e){return function(e,t){return e.value.blocks.some((function(e){return e.type===t}))}(e,t)?D({active:!0}):D({active:!1})}})}({type:t})({editor:e,label:n})}},W={padding:"5px",textAlign:"right",color:"gray",fontFamily:'source-code-pro, Menlo, Monaco, Consolas, "Courier New",\n  monospace',fontWeight:"bold"},I=function(e){return e.split(" ").join("").split("\n").join("").length},F=function(e){return{renderEditor:function(t,n,r){return o.a.createElement("div",{style:e},r())}}},B={export:null},L=[function(e){return{renderBlock:function(t,n,r){return t.isFocused?o.a.createElement("div",{style:{backgroundColor:e}},r()):r()}}}("rgba(0,0,0,.05)")].concat(Object(u.a)(d),Object(u.a)(h),[{onKeyDown:function(e,t,n){if(9!==e.keyCode)return n();e.preventDefault(),t.insertText("    ")}},C({topLeftItems:[M({type:"bold",label:"Bold"}),M({type:"italic",label:"Italic"}),M({type:"strikethrough",label:"Strike"})],topRightItems:[P({type:"paragraph",label:"Para..."}),P({type:"code",label:"<Code />"}),P({type:"quotation",label:'"Quate"'})],bottomLeftItems:[function(e){return o.a.createElement("button",{style:D({}),onClick:function(){return B.export?B.export():null}}," > Save")}],bottomRightItems:[function(e){var t=I(e.value.document.text),n=I(e.value.fragment.text);return o.a.createElement("div",{style:W},o.a.createElement("span",null,n," sel /"),o.a.createElement("span",null," ",t," tot"))}]}),F({border:"1px solid lightgray",padding:"7px"})]),H=function(e){var t=e.suggestionMap,n=e.content,r=e.setContent,a=o.a.useState(L),c=Object(i.a)(a,2),s=c[0],p=c[1];o.a.useEffect((function(){t&&p([].concat(Object(u.a)(L),[k(t)]))}),[t]);var f=o.a.useState(n),d=Object(i.a)(f,2),y=d[0],m=d[1];o.a.useEffect((function(){m(n)}),[n]),o.a.useEffect((function(){B.export=function(){return r(y)}}),[y,r]);return y?o.a.createElement(l.a,{onChange:function(e){m(e.value)},value:y,plugins:s,autoFocus:!0}):null};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={display:"flex",flexFlow:"column wrap",height:"500px",alignItems:"center",margin:"10px 0px",overflow:"scroll",border:"1px solid lightgray"},N={display:"flex",flexFlow:"row",margin:"10px"},J=function(e){return{width:"key"===e?"100px":"200px",textAlign:"center",padding:"7px",margin:"3px",fontFamily:'source-code-pro, Menlo, Monaco, Consolas, "Courier New",monospace',fontWeight:"bold",border:"0",borderBottom:"1px solid gray",outline:"none"}},A={margin:"10px 5px",fontFamily:'source-code-pro, Menlo, Monaco, Consolas, "Courier New",monospace',fontWeight:"bold",padding:"5px",border:0,cursor:"pointer"},q={backgroundColor:"transparent",border:"0",color:"indianRed",cursor:"pointer",fontWeight:"bold"},V=function(e){var t=e.value,n=e.setState,r=e.style,a=o.a.useState(t),c=Object(i.a)(a,2),u=c[0],l=c[1],s=o.a.useState(!1),p=Object(i.a)(s,2),f=p[0],d=p[1],y=o.a.useRef();return o.a.createElement("input",{style:K({},r,{backgroundColor:f?"rgba(0,0,0,.05)":"white"}),ref:y,value:u,onChange:function(e){return l(e.target.value)},onFocus:function(e){y.current.select(),d(!0)},onBlur:function(e){t!==u&&n(u),d(!1)}})},Q=function(e){var t=e.suggestionMap,n=e.setSuggestionMap,r=o.a.useState(null),a=Object(i.a)(r,2),c=a[0],l=a[1],s=o.a.useState(null),p=Object(i.a)(s,2),f=p[0],d=p[1],m=o.a.useState(null),b=Object(i.a)(m,2),v=b[0],g=b[1],h=o.a.useState(null),O=Object(i.a)(h,2),E=O[0],j=O[1];o.a.useEffect((function(){t&&(l(Object.keys(t)),d(Object.keys(t).map((function(e){return t[e]}))),g(Object.keys(t).map((function(e,t){return t}))),j(Object.keys(t).length))}),[t]);var k=function(e,t,n){return function(r){n([].concat(Object(u.a)(t.slice(0,e)),[r],Object(u.a)(t.slice(e+1))))}};return v?o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},o.a.createElement("button",{onClick:function(){l([""].concat(Object(u.a)(c))),d([""].concat(Object(u.a)(f))),g([E].concat(Object(u.a)(v))),j(E+1)},style:A},"+ add new shortcut"),o.a.createElement("button",{onClick:function(){return n(function(e,t){return e.reduce((function(e,n,r){return n?K({},e,Object(y.a)({},n,t[r])):K({},e)}),{})}(c,f))},style:A},"> save shortcuts")),o.a.createElement("div",{style:T},v.map((function(e,t){return o.a.createElement("div",{key:e,style:N},o.a.createElement("button",{style:q,onClick:(n=t,function(e){l([].concat(Object(u.a)(c.slice(0,n)),Object(u.a)(c.slice(n+1)))),d([].concat(Object(u.a)(f.slice(0,n)),Object(u.a)(f.slice(n+1)))),g([].concat(Object(u.a)(v.slice(0,n)),Object(u.a)(v.slice(n+1))))})},"-"),o.a.createElement(V,{style:J("key"),value:c[t],setState:k(t,c,l)}),o.a.createElement(V,{style:J("val"),value:f[t],setState:k(t,f,d)}));var n})))):null},$=n(219),z=n(27),G=n.n(z),U=n(3),X={width:"80%",maxWidth:"1000px",minWidth:"500px",margin:"0 auto"},Y={textAlign:"center",paddingTop:"30px",fontFamily:'source-code-pro, Menlo, Monaco, Consolas, "Courier New",monospace'},Z={padding:"30px",paddingBottom:"60px"},_={AMI:"Acute Myocardial Infarction",CHD:"Congenital Heart Disease",CHF:"Congenital Heart Failure"},ee=function(){var e=G.a.get("slateJs-demo"),t=e?JSON.parse(e):"";return U.n.fromJSON(t||{document:{nodes:[{object:"block",type:"paragraph",nodes:[{object:"text",text:""}]}]}})}();var te=function(){var e=o.a.useState(null),t=Object(i.a)(e,2),n=t[0],r=t[1];o.a.useEffect((function(){var e=G.a.get("h2O-editor-suggestionMap");r(e||{})}),[]),o.a.useEffect((function(){n!==_&&G.a.set("h2O-editor-suggestionMap",n)}),[n]);var a=o.a.useState(null),c=Object(i.a)(a,2),u=c[0],l=c[1];return o.a.useEffect((function(){l(ee)}),[]),o.a.useEffect((function(){if(u&&u.document!==ee.document){var e=JSON.stringify(u);G.a.set("slateJs-demo",e)}}),[u]),o.a.createElement("div",{style:X},o.a.createElement("h1",{style:Y},"<Editor />"),o.a.createElement("div",{style:Z},o.a.createElement(H,{suggestionMap:n,content:u,setContent:l})),o.a.createElement($.a,null),o.a.createElement("h1",{style:Y},"<KeyMapTable />"),o.a.createElement("div",{style:Z},o.a.createElement(Q,{suggestionMap:n,setSuggestionMap:r})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,n){e.exports=n(209)},93:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.ac3429cb.chunk.js.map