{"version":3,"sources":["editor/plugins/CmdKeyPlugins.js","editor/plugins/CtrlKeyPlugins.js","editor/plugins/HighlightFocusedBlockPlugin.js","editor/api/suggestionMap.js","editor/api/SuggestionMapAPI.js","editor/plugins/LastWordPlugin.js","editor/plugins/SuggestionPortalPlugin.js","editor/plugins/ToolbarPlugin.js","editor/plugins/styleQueryPlugin.js","editor/plugins/TextCountPlugin.js","editor/plugins/EditorStylePlugin.js","editor/api/EditorContentAPI.js","editor/Editor.js","editor/plugins/TabIndentPlugin.js","editor/KeyMapTable.js","App.js","serviceWorker.js","index.js"],"names":["CmdKeyMark","options","type","key","onKeyDown","e","editor","next","metaKey","preventDefault","toggleMark","RenderMark","renderMark","props","mark","component","CmdMarkPlugin","CmdKeyPlugins","attribute","children","style","background","CtrlKeyBlock","ctrlKey","isType","value","blocks","some","block","setBlocks","RenderBlock","renderBlock","node","ctrlKeyPlugin","CtrlKeyPlugins","HighlightFocusedBlockPlugin","backgroundColor","isFocused","map","AMI","CHD","CHF","AF","Af","VF","VT","CAD","RHD","SLE","DIC","COPD","PE","SOB","URI","ARF","HHNK","DM","CP","IICP","HIVD","MS","MG","RA","BPH","UTI","NPC","CPS","RD","IVF","AFE","VD","PROM","RDS","SAH","LE","TB","Ca","CPN","DOA","DOE","AGN","LP","THR","EP","CVP","GCS","ROM","PP","NSD","AAD","BW","CC","CO","CPR","BH","OU","OS","OD","store","get","defaultMap","data","set","suggestionMap","SuggestionMapAPI","optionStyle","select","firstChild","lastChild","Object","assign","color","padding","fontWeight","border","cursor","borderTop","borderBottom","suggestionList","clear","Portal","React","useState","open","setOpen","index","setIndex","xOffset","setXOffset","yOffset","setYOffset","portalRef","useRef","useEffect","editorEventHandler","detail","instruction","rect","window","getSelection","getRangeAt","getBoundingClientRect","left","bottom","console","log","updatePortalPosition","newIndex","length","current","scrollIntoView","inline","replaceLastWord","insertText","handleEditor","updateHandler","updateSuggestionMap","document","addEventListener","removeEventListener","onMouseDown","onMouseOver","ref","display","flexFlow","overflow","maxHeight","minWidth","position","top","transform","option","i","SuggestionPortalPlugin","queries","getLastWord","focusText","text","focusOffset","selection","focus","offset","slice","split","join","reverse","getSuggestionWord","getSuggestionWordOf","getSuggestionListOf","lastWord","reduce","acc","char","commands","newWord","deleteBackward","replaceLastWordBySuggestion","suggestion","editorEmittedEvent","CustomEvent","keyCode","dispatchEvent","EventDispatcher","renderEditor","toolbarStyle","justifyContent","moduleStyle","buttonStyle","active","margin","fontFamily","makeButton","mouseDownHandler","styleHandler","label","ToggleMarkButton","isMarkTypeActive","makeToggleMarkButton","SetBlockButton","isBlockTypeActive","makeSetBlockButton","Toolbar","ToolbarPlugin","isBoldActive","activeMarks","isItalicActive","isStrikethroughActive","isCodeBlock","isParagraphBlock","isQuotationBlock","textAlign","calLength","str","TextCountPlugin","totalText","selectedText","fragment","EditorStylePlugin","storedJsonStr","json","JSON","parse","Value","fromJSON","nodes","object","change","jsonStr","stringify","toJSON","plugins","H2oEditor","initVal","EditorContentAPI","setValue","onChange","autoFocus","tableStyle","height","alignItems","pairStyle","inputStyle","width","outline","deleteButtonStyle","Input","setState","v","setV","inputRef","target","onFocus","onBlur","KeyMapTable","table","setKeys","keys","setVals","setUids","setNextId","vals","uids","nextId","setStateBy","field","setter","newVal","exportData","bind","onClick","uid","containerStyle","maxWidth","headingStyle","paddingTop","componentStyle","App","Editor","Divider","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e485f435.chunk.js","sourcesContent":["import React from 'react'\n\nconst CmdKeyMark = options => {\n  const { type, key } = options\n  return {\n    onKeyDown: (e, editor, next) => {\n      if (!e.metaKey || !(e.key === key)) {\n        return next()\n      }\n      e.preventDefault()\n      editor.toggleMark(type)\n    }\n  }\n}\nconst RenderMark = options => {\n  return {\n    renderMark: (props, editor, next) => {\n      if (props.mark.type === options.type) {\n        return options.component(props)\n      } else {\n        return next()\n      }\n    }\n  }\n}\nconst CmdMarkPlugin = options => [\n  CmdKeyMark(options),\n  RenderMark(options)\n]\n\nconst CmdKeyPlugins = [\n  ...CmdMarkPlugin({\n    type: 'bold',\n    key: 'b',\n    component: props => (\n      <strong {...props.attribute}>{props.children}</strong>\n    )\n  }),\n  ...CmdMarkPlugin({\n    type: 'strikethrough',\n    key: 's',\n    component: props => (\n      <s {...props.attribute}>{props.children}</s>\n    )\n  }),\n  ...CmdMarkPlugin({\n    type: 'underline',\n    key: 'u',\n    component: props => (\n      <u {...props.attribute}>{props.children}</u>\n    )\n  }),\n  ...CmdMarkPlugin({\n    type: 'italic',\n    key: 'i',\n    component: props => (\n      <i {...props.attribute}>{props.children}</i>\n    )\n  }),\n  ...CmdMarkPlugin({\n    type: 'highlight',\n    key: 'h',\n    component: props => (\n      <span {...props.attribute} style={{ background: 'gold' }}>{props.children}</span>\n    )\n  })\n]\n\nexport default CmdKeyPlugins\n","import React from 'react'\n\nconst CtrlKeyBlock = options => {\n  const { type, key } = options\n  return {\n    onKeyDown: (e, editor, next) => {\n      if (!e.ctrlKey || !(e.key === key)) {\n        return next()\n      }\n      e.preventDefault()\n      const isType = editor.value.blocks.some(block => block.type === type)\n      editor.setBlocks({ type: isType ? 'paragraph' : type })\n    }\n  }\n}\n\nconst RenderBlock = options => {\n  const { type, component } = options\n  return {\n    renderBlock: (props, editor, next) => {\n      if (props.node.type === type) {\n        return component({ ...props })\n      } else {\n        return next()\n      }\n    }\n  }\n}\nconst ctrlKeyPlugin = ({ type, key, component }) => {\n  return [\n    CtrlKeyBlock({ type, key }),\n    RenderBlock({ type, component })\n  ]\n}\n\nconst CtrlKeyPlugins = [\n  ...ctrlKeyPlugin({\n    type: 'code',\n    key: 'c',\n    component: props => (\n      <pre {...props.attribute}>\n        <code>{props.children}</code>\n      </pre>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header1',\n    key: '1',\n    component: props => (\n      <h1 {...props.attribute}>\n        {props.children}\n      </h1>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header2',\n    key: '2',\n    component: props => (\n      <h2 {...props.attribute}>\n        {props.children}\n      </h2>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header3',\n    key: '3',\n    component: props => (\n      <h3 {...props.attribute}>\n        {props.children}\n      </h3>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header4',\n    key: '4',\n    component: props => (\n      <h4 {...props.attribute}>\n        {props.children}\n      </h4>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header5',\n    key: '5',\n    component: props => (\n      <h5 {...props.attribute}>\n        {props.children}\n      </h5>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header6',\n    key: '6',\n    component: props => (\n      <h6 {...props.attribute}>\n        {props.children}\n      </h6>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'quotation',\n    key: 'q',\n    component: props => (\n      <blockquote {...props.attribute}>\n        {props.children}\n      </blockquote>\n    )\n  })\n]\n\nexport default CtrlKeyPlugins\n","import React from 'react'\n\nconst HighlightFocusedBlockPlugin = backgroundColor => (\n  {\n    renderBlock: (props, editor, next) => {\n      return props.isFocused ? (\n        <div style={{ backgroundColor }}>\n          {next()}\n        </div>) : next()\n    }\n  }\n)\nexport default HighlightFocusedBlockPlugin\n","const map = {\n  AMI: 'Acute Myocardial Infarction',\n  CHD: 'Congenital Heart Disease',\n  CHF: 'Congenital Heart Failure',\n  AF: 'Atrial Flutter',\n  Af: 'Atrial Fibrillation',\n  VF: 'Ventricular Flutter',\n  VT: 'Ventricular Tachycardia',\n  CAD: 'Coronary Artery Disease',\n  'H/T': 'Hypertension',\n  RHD: 'Rheumatic Heart Disease',\n  SLE: 'Systemic Lupus Erythematosus',\n  DIC: 'Disseminated Intravascular Coagulation',\n  COPD: 'Chronic Obstructive  Pulmonary  Disease',\n  PE: 'Pulmonary Embolism ',\n  SOB: 'short of breath',\n  URI: 'Upper Respiratory Infection',\n  ARF: 'Acute Renal Failure',\n  'App.': 'Appendicitis',\n  HHNK: 'Hyperglycemic Hyperosmolar Nonketolytic Coma',\n  DM: 'diabetes mellitus',\n  CP: 'Cerebral Palsy',\n  IICP: 'Increased Intracranial Pressure',\n  HIVD: 'Herniation of Intervertebral Disc',\n  MS: 'Multiple Sclerosis',\n  MG: 'Myasthenic Ggravis',\n  RA: 'Rreumatoid Arthritis',\n  BPH: 'benign prostatic hypertrophy',\n  UTI: 'Urinary Tract Infection',\n  NPC: 'Nasopharyngeal Carcinoma',\n  CPS: 'Chronic paranasal sinusitis',\n  RD: 'Retinal Detachment',\n  IVF: 'In Vitro Fertilization',\n  AFE: 'Amniotic Fluid Embolism',\n  VD: 'Venereal Disease',\n  PROM: 'Premature Rupture of  Membrane',\n  RDS: 'Respiratory Distress Syndrome',\n  SAH: 'Subarachnoid Hemorrhage',\n  LE: 'Lupus erythematosus',\n  TB: 'Tuberculosis',\n  Ca: 'potassium',\n  CPN: 'chronic pyelonephritis ',\n  DOA: 'dead on arrival',\n  DOE: 'dyspnea on exercise',\n  AGN: 'Acute Glomerulenephritis',\n  LP: 'Lumbar Puncture',\n  THR: 'Total Hip Replacement',\n  'D&C': 'Dilatation and Curettage',\n  'D&E': 'Dilatation and Evacuation',\n  EP: 'Episiotomy',\n  CVP: 'central venous pressure',\n  'B.T.': 'Transfusion',\n  GCS: 'Glasgow Coma scale',\n  ROM: 'Range of  Motion',\n  PP: 'Postpartum',\n  'C/S': 'Cesarean Section',\n  NSD: 'Normal Spontaneous Delivery',\n  AAD: 'against-advice discharge',\n  BW: 'body  weight',\n  CC: 'chief complaint',\n  CO: 'cardiac output',\n  CPR: 'cardiopulmonary resuscitation',\n  BH: 'body height',\n  OU: 'Oculus Uterque',\n  OS: 'Oculus Sinister',\n  OD: ' Oculus Dexter',\n  'I&O': 'Intake and output'\n}\n\nexport default map\n","import store from 'store-js'\nimport defaultMap from './suggestionMap'\n\nconst exporter = data => { store.set('client-suggestionMap', data) }\nconst importer = () => store.get('client-suggestionMap') || defaultMap\n\nexport default { importer, exporter }\n","import SuggestionMapAPI from '../api/SuggestionMapAPI'\nlet suggestionMap = SuggestionMapAPI.importer()\n\nconst LastWordPlugin = {\n  queries: {\n    getLastWord: editor => {\n      if (editor.value.focusText) {\n        const text = editor.value.focusText.text\n        const focusOffset = editor.value.selection.focus.offset\n        const tail = text.slice(0, focusOffset).split('\\n').join('').split(' ').reverse()[0]\n        return tail\n      }\n      return ''\n    },\n    getSuggestionWord: editor => { // string\n      return suggestionMap[editor.getLastWord()] || ''\n    },\n    getSuggestionWordOf: (editor, key) => { // string\n      return suggestionMap[editor.getLastWord() + key] || ''\n    },\n    getSuggestionListOf: (editor, key) => {\n      const lastWord = editor.getLastWord() + key || ''\n      return !lastWord ? [] : lastWord.split('').reduce(\n        (acc, char, i) => (\n          acc[0] ? [acc[0] + char, ...acc] : [char]\n        ), []\n      ).reduce(\n        (acc, key) => (\n          suggestionMap[key] ? [...acc, suggestionMap[key]] : [...acc]\n        ), []\n      )\n    }\n  },\n  commands: {\n    updateSuggestionMap: editor => { suggestionMap = SuggestionMapAPI.importer() },\n    replaceLastWord: (editor, newWord) => {\n      const lastWord = editor.getLastWord()\n      if (!lastWord) {\n        return\n      }\n      if (typeof newWord !== 'string') {\n        return\n      }\n      editor.deleteBackward(lastWord.length).insertText(newWord)\n    },\n    replaceLastWordBySuggestion: editor => {\n      const lastWord = editor.getLastWord()\n      if (!lastWord) {\n        return\n      }\n      const suggestion = editor.getSuggestionWord()\n      if (!suggestion) {\n        return\n      }\n      editor.deleteBackward(lastWord.length).insertText(suggestion)\n    }\n  }\n}\n\nexport default LastWordPlugin\n","import React from 'react'\nimport LastWordPlugin from './LastWordPlugin'\n\nconst portalStyle = ({ open, xOffset, yOffset }) => ({\n  display: open ? 'flex' : 'none',\n  flexFlow: 'column',\n  overflow: 'scroll',\n  maxHeight: '136px',\n  minWidth: '100px',\n\n  position: 'fixed',\n  left: xOffset,\n  top: yOffset,\n  transform: 'translate3d(-5px,5px,0)',\n\n  border: '1px dashed gray'\n})\n\nconst optionStyle = ({ select, firstChild, lastChild }) => {\n  const baseStyle = {\n    backgroundColor: 'white',\n    color: 'gray',\n    padding: '7px 14px 7px 7px',\n    fontWeight: 'bold',\n    border: '1px solid transparent',\n    cursor: 'pointer'\n  }\n  const selectStyle = {\n    backgroundColor: 'gray',\n    color: 'white',\n    borderTop: '1px dashed white',\n    borderBottom: '1px dashed white'\n  }\n  const lastStyle = {\n    borderBottom: '1px solid transparent'\n  }\n  const firstStyle = {\n    borderTop: '1px solid transparent'\n  }\n  return Object.assign(\n    {},\n    baseStyle,\n    select ? selectStyle : {},\n    firstChild ? firstStyle : {},\n    lastChild ? lastStyle : {}\n  )\n}\n\n// sharing data between Portal and EventDispatcher\nconst suggestionList = {\n  value: [],\n  clear: () => { suggestionList.value = [] }\n}\n\nconst Portal = ({ editor }) => {\n  // portal state, listen to editor\n  const [open, setOpen] = React.useState(false)\n  const [index, setIndex] = React.useState(0)\n\n  // portal position\n  const [xOffset, setXOffset] = React.useState(0)\n  const [yOffset, setYOffset] = React.useState(0)\n  const portalRef = React.useRef(null)\n\n  const updatePortalPosition = () => {\n    try {\n      const rect = window.getSelection().getRangeAt(0).getBoundingClientRect()\n      setXOffset(rect.left)\n      setYOffset(rect.bottom)\n    } catch {\n      console.log('uncaught caret position')\n    }\n  }\n\n  React.useEffect(\n    () => {\n      const handleEditor = ({ editor, index }) => e => {\n        switch (e.detail.instruction) {\n          case 'open': {\n            updatePortalPosition()\n            setIndex(0)\n            setOpen(true)\n            break\n          }\n          case 'close': {\n            setOpen(false)\n            setIndex(0)\n            break\n          }\n          case 'incre': {\n            const newIndex = (index + 1) % suggestionList.value.length || 0\n            setIndex(newIndex)\n            portalRef.current && portalRef.current.children[newIndex].scrollIntoView({\n              block: 'nearest',\n              inline: 'nearest'\n            })\n            break\n          }\n          case 'decre': {\n            const newIndex = (index - 1 + suggestionList.value.length) % suggestionList.value.length || 0\n            setIndex(newIndex)\n            portalRef.current && portalRef.current.children[newIndex].scrollIntoView({\n              block: 'nearest',\n              inline: 'nearest'\n            })\n            break\n          }\n          case 'enter': {\n            const suggestion = suggestionList.value[index]\n            if (suggestion) {\n              editor.replaceLastWord(suggestionList.value[index]).insertText(' ')\n            }\n            setIndex(0)\n            setOpen(false)\n            break\n          }\n          default: {\n            console.log('unhandled event:', e)\n            break\n          }\n        }\n      }\n      const editorEventHandler = handleEditor({ index, editor })\n      const updateHandler = () => editor.updateSuggestionMap()\n      document.addEventListener('editorEmittedEvent', editorEventHandler)\n      document.addEventListener('suggestionMapUpdated', updateHandler)\n      return () => {\n        document.removeEventListener('editorEmittedEvent', editorEventHandler)\n        document.removeEventListener('suggestionMapUpdated', updateHandler)\n      }\n    }, [editor, index] // update callback behavior when index or editor change\n  )\n\n  const onMouseDown = index => e => {\n    e.preventDefault()\n    setIndex(index)\n    setOpen(false)\n    editor.replaceLastWord(suggestionList.value[index])\n  }\n  const onMouseOver = index => e => {\n    e.preventDefault()\n    setIndex(index)\n  }\n\n  return (\n    suggestionList.value.length\n      ? (\n        <div\n          ref={portalRef}\n          style={portalStyle({\n            open,\n            xOffset,\n            yOffset\n          })}\n        >\n          {\n            suggestionList.value.map(\n              (option, i) => (\n                <div\n                  key={i}\n                  onMouseOver={onMouseOver(i)}\n                  onMouseDown={onMouseDown(i)}\n                  style={optionStyle({\n                    select: index === i,\n                    firstChild: i === 0,\n                    lastChild: i === suggestionList.value.length - 1\n                  })}\n                >\n                  {option}\n                </div>\n              )\n            )\n          }\n        </div>\n      )\n      : null\n  )\n}\n\nconst EventDispatcher = () => {\n  const editorEmittedEvent = instruction => (\n    new window.CustomEvent('editorEmittedEvent', { detail: { instruction } })\n  )\n\n  const onKeyDown = (e, editor, next) => {\n    if (e.keyCode >= 65 && e.keyCode <= 90 && !e.ctrlKey && !e.metaKey) {\n    // a-65 z-90\n      suggestionList.value = editor.getSuggestionListOf(e.key)\n      document.dispatchEvent(editorEmittedEvent('open'))\n      return next()\n    } else if (suggestionList.value.length) {\n      switch (e.keyCode) {\n        case 38: { // up\n          e.preventDefault()\n          document.dispatchEvent(editorEmittedEvent('decre'))\n          return\n        }\n        case 40: { // down\n          e.preventDefault()\n          document.dispatchEvent(editorEmittedEvent('incre'))\n          return\n        }\n        case 13: { // enter\n          e.preventDefault()\n          document.dispatchEvent(editorEmittedEvent('enter'))\n          suggestionList.clear()\n          return\n        }\n        default: {\n          document.dispatchEvent(editorEmittedEvent('close'))\n          suggestionList.clear()\n          return next()\n        }\n      }\n    } else {\n      return next()\n    }\n  }\n\n  const onMouseDown = (e, editor, next) => {\n    document.dispatchEvent(editorEmittedEvent('close'))\n    return next()\n  }\n\n  return ({ onKeyDown, onMouseDown })\n}\n\nconst SuggestionPortalPlugin = ({\n  ...LastWordPlugin,\n  ...EventDispatcher(),\n  renderEditor: (props, editor, next) => (\n    <>\n      {next()}\n      <Portal editor={editor} />\n    </>\n  )\n})\n\nexport default SuggestionPortalPlugin\n","import React from 'react'\nimport styleQueryPlugin from './styleQueryPlugin'\n\nconst toolbarStyle = {\n  display: 'flex',\n  justifyContent: 'space-between'\n}\nconst moduleStyle = {}\n\nconst buttonStyle = ({ active }) => ({\n  margin: '10px 5px',\n  backgroundColor: active ? 'gray' : 'transparent',\n  color: active ? 'white' : 'black',\n  fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",monospace',\n  fontWeight: 'bold',\n  padding: '5px',\n  border: 0,\n  cursor: 'pointer'\n})\n\nconst makeButton = ({ mouseDownHandler, styleHandler }) => ({ editor, label }) => (\n  <button\n    style={styleHandler(editor)}\n    onMouseDown={mouseDownHandler(editor)}\n  >\n    {label}\n  </button>\n)\nconst makeToggleMarkButton = ({ type }) => makeButton({\n  mouseDownHandler: editor => e => {\n    e.preventDefault()\n    editor.toggleMark({ type })\n  },\n  styleHandler: editor => editor.isMarkTypeActive(type)\n    ? buttonStyle({ active: true })\n    : buttonStyle({ active: false })\n})\nconst ToggleMarkButton = ({ type, label, editor }) => (\n  makeToggleMarkButton({ type })({ editor, label })\n)\n\nconst makeSetBlockButton = ({ type }) => makeButton({\n  mouseDownHandler: editor => e => {\n    e.preventDefault()\n    editor.setBlocks({ type })\n  },\n  styleHandler: editor => editor.isBlockTypeActive(type)\n    ? buttonStyle({ active: true })\n    : buttonStyle({ active: false })\n})\nconst SetBlockButton = ({ type, label, editor }) => (\n  makeSetBlockButton({ type })({ editor, label })\n)\n\nconst Toolbar = ({ editor }) => (\n  <div style={toolbarStyle}>\n    <div style={moduleStyle}>\n      <ToggleMarkButton\n        editor={editor}\n        type='bold'\n        label='Bold'\n      />\n      <ToggleMarkButton\n        editor={editor}\n        type='italic'\n        label='Italic'\n      />\n      <ToggleMarkButton\n        editor={editor}\n        type='strikethrough'\n        label='Strike'\n      />\n    </div>\n    <div style={moduleStyle}>\n      <SetBlockButton\n        editor={editor}\n        type='paragraph'\n        label='Para...'\n      />\n      <SetBlockButton\n        editor={editor}\n        type='quotation'\n        label='Qua.'\n      />\n      <SetBlockButton\n        editor={editor}\n        type='code'\n        label='<code>'\n      />\n    </div>\n  </div>\n)\n\nconst ToolbarPlugin = {\n  renderEditor: (props, editor, next) => {\n    return (\n      <>\n        <Toolbar editor={editor} />\n        {next()}\n      </>\n    )\n  },\n  ...styleQueryPlugin\n}\n\nexport default ToolbarPlugin\n","\nconst styleQueryPlugin = {\n  queries: {\n    isBoldActive: editor => editor.value.activeMarks.some(mark => mark.type === 'bold'),\n    isItalicActive: editor => editor.value.activeMarks.some(mark => mark.type === 'italic'),\n    isStrikethroughActive: editor => editor.value.activeMarks.some(mark => mark.type === 'strikethrough'),\n    isMarkTypeActive: (editor, type) => editor.value.activeMarks.some(mark => mark.type === type),\n    isCodeBlock: editor => editor.value.blocks.some(block => block.type === 'code'),\n    isParagraphBlock: editor => editor.value.blocks.some(block => block.type === 'paragraph'),\n    isQuotationBlock: editor => editor.value.blocks.some(block => block.type === 'quotation'),\n    isBlockTypeActive: (editor, type) => editor.value.blocks.some(block => block.type === type)\n  }\n}\n\nexport default styleQueryPlugin\n","import React from 'react'\n\nconst style = {\n  padding: '5px',\n  textAlign: 'right',\n  color: 'gray',\n  fontFamily: `source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",\n  monospace`,\n  fontWeight: 'bold'\n}\n\nconst calLength = str => str.split(' ').join('').split('\\n').join('').length\n\nconst TextCountPlugin = {\n  renderEditor: (props, editor, next) => {\n    const totalText = calLength(editor.value.document.text)\n    const selectedText = calLength(editor.value.fragment.text)\n    return (\n      <>\n        {next()}\n        <div style={style}>\n          <span>{selectedText} sel.</span>\n          <span>{totalText} tot.</span>\n        </div>\n      </>\n    )\n  }\n}\n\nexport default TextCountPlugin\n","import React from 'react'\n\nconst EditorStylePlugin = style => ({\n  renderEditor: (props, editor, next) => {\n    return (\n      <div style={style}>\n        {next()}\n      </div>\n    )\n  }\n})\n\nexport default EditorStylePlugin\n","import store from 'store-js'\nimport { Value } from 'slate'\n\nconst importer = () => {\n  const storedJsonStr = store.get('slateJs-demo')\n  const json = storedJsonStr ? JSON.parse(storedJsonStr) : ''\n  const initialValue = Value.fromJSON(json || {\n    document: {\n      nodes: [\n        {\n          object: 'block',\n          type: 'paragraph',\n          nodes: [\n            {\n              object: 'text',\n              text: ' A line of text in a paragraph.'\n            }\n          ]\n        }\n      ]\n    }\n  })\n  return initialValue\n}\n\nconst exporter = change => {\n  const jsonStr = JSON.stringify(change.value.toJSON())\n  store.set('slateJs-demo', jsonStr)\n}\n\nexport default { importer, exporter }\n","// core\nimport React from 'react'\nimport { Editor } from 'slate-react'\n\n// plugins\n/* ------ KeyBinding ------- */\nimport CmdKeyPlugins from './plugins/CmdKeyPlugins'\nimport CtrlKeyPlugins from './plugins/CtrlKeyPlugins'\nimport TabIndentPlugin from './plugins/TabIndentPlugin'\n\n/* ------ Decoration ------- */\nimport HighlightFocusedBlockPlugin from './plugins/HighlightFocusedBlockPlugin'\n\n/* ------ Suggestion ------- */\nimport SuggestionPortalPlugin from './plugins/SuggestionPortalPlugin'\n\n/* ---------  GUI  --------- */\nimport ToolbarPlugin from './plugins/ToolbarPlugin'\nimport TextCountPlugin from './plugins/TextCountPlugin'\n\n/* --------- Style -------- */\nimport EditorStylePlugin from './plugins/EditorStylePlugin'\n\n// save & load\nimport EditorContentAPI from './api/EditorContentAPI'\n\nconst plugins = [\n  HighlightFocusedBlockPlugin('rgba(0,0,0,.1)'),\n  ...CmdKeyPlugins,\n  ...CtrlKeyPlugins,\n  TabIndentPlugin,\n  ToolbarPlugin,\n  TextCountPlugin,\n  SuggestionPortalPlugin,\n  EditorStylePlugin({\n    border: '1px solid lightgray',\n    padding: '7px'\n  })\n]\n\nconst H2oEditor = props => {\n  // fetch EditorContent\n  React.useEffect(\n    () => {\n      const initVal = EditorContentAPI.importer()\n      setValue(initVal)\n    }, []\n  )\n\n  const [value, setValue] = React.useState(null)\n\n  const onChange = change => {\n    // export EditorContent when substantial change occurs\n    if (change.value.document !== value.document) {\n      EditorContentAPI.exporter(change)\n    }\n\n    // update editor\n    setValue(change.value)\n  }\n\n  return value ? (\n    <Editor\n      onChange={onChange}\n      value={value}\n      plugins={plugins}\n      autoFocus\n    />\n  ) : null\n}\n\nexport default H2oEditor\n","export default {\n  onKeyDown: (e, editor, next) => {\n    if (e.keyCode !== 9) {\n      return next()\n    }\n    e.preventDefault()\n    editor.insertText('    ')\n  }\n}\n","import React from 'react'\nimport SuggestionMapAPI from './api/SuggestionMapAPI'\n\nconst tableStyle = {\n  display: 'flex',\n  flexFlow: 'column wrap',\n  height: '500px',\n  alignItems: 'center',\n  margin: '10px 0px',\n  overflow: 'scroll',\n  border: '1px solid lightgray'\n}\nconst pairStyle = {\n  display: 'flex',\n  flexFlow: 'row',\n  margin: '10px'\n}\nconst inputStyle = type => ({\n  width: type === 'key' ? '100px' : '200px',\n  textAlign: 'center',\n  padding: '7px',\n  margin: '3px',\n  fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",monospace',\n  fontWeight: 'bold',\n  border: '0',\n  borderBottom: '1px solid gray',\n  outline: 'none'\n})\nconst buttonStyle = {\n  margin: '10px 5px',\n  fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",monospace',\n  fontWeight: 'bold',\n  padding: '5px',\n  border: 0,\n  cursor: 'pointer'\n}\nconst deleteButtonStyle = {\n  backgroundColor: 'transparent',\n  border: '0',\n  color: 'indianRed',\n  cursor: 'pointer'\n\n}\n\nconst Input = ({ value, setState, style }) => {\n  const [v, setV] = React.useState(value)\n  const inputRef = React.useRef()\n\n  const onChange = e => setV(e.target.value)\n  const onFocus = e => inputRef.current.select()\n  const onBlur = e => value === v ? 0 : setState(v)\n\n  return (\n    <input\n      style={style}\n      ref={inputRef}\n      value={v}\n      onChange={onChange}\n      onFocus={onFocus}\n      onBlur={onBlur}\n    />\n  )\n}\n\nconst KeyMapTable = () => {\n  // fetch keyMapTable\n  React.useEffect(\n    () => {\n      const table = SuggestionMapAPI.importer()\n      setKeys(Object.keys(table))\n      setVals(Object.keys(table).map(key => table[key]))\n      setUids(Object.keys(table).map((key, i) => i))\n      setNextId(Object.keys(table).length)\n    }, []\n  )\n\n  // flatten table to keys[] : vals[] pair\n  const [keys, setKeys] = React.useState([])\n  const [vals, setVals] = React.useState([])\n  // dynamic generate unique keyId for new pair\n  const [uids, setUids] = React.useState([])\n  const [nextId, setNextId] = React.useState(0)\n\n  const setStateBy = (index, field, setter) => newVal => {\n    setter([...field.slice(0, index), newVal, ...field.slice(index + 1)])\n  }\n\n  const deletePair = index => e => {\n    setKeys([...keys.slice(0, index), ...keys.slice(index + 1)])\n    setVals([...vals.slice(0, index), ...vals.slice(index + 1)])\n    setUids([...uids.slice(0, index), ...uids.slice(index + 1)])\n  }\n\n  const addPair = () => {\n    setKeys(['', ...keys])\n    setVals(['', ...vals])\n    setUids([nextId, ...uids])\n    setNextId(nextId + 1)\n  }\n\n  // bind keys[] : vals[] pair to generate suggestion table\n  const bind = (keys, vals) => keys.reduce(\n    (acc, key, i) => (\n      key ? { ...acc, [key]: vals[i] } : { ...acc }\n    ), {}\n  )\n  const exportData = () => {\n    SuggestionMapAPI.exporter(bind(keys, vals))\n    document.dispatchEvent(new window.CustomEvent('suggestionMapUpdated'))\n  }\n\n  React.useEffect(\n    () => {\n      exportData()\n    }\n  )\n\n  return (\n    <div>\n      <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\n        <button onClick={addPair} style={buttonStyle}>+ add new shortcut</button>\n      </div>\n      <div style={tableStyle}>\n        {uids.map(\n          (uid, i) => (\n            <div key={uid} style={pairStyle}>\n              <button\n                style={deleteButtonStyle}\n                onClick={deletePair(i)}\n              >-\n              </button>\n              <Input\n                style={inputStyle('key')}\n                value={keys[i]}\n                setState={setStateBy(i, keys, setKeys)}\n              />\n              <Input\n                style={inputStyle('val')}\n                value={vals[i]}\n                setState={setStateBy(i, vals, setVals)}\n              />\n            </div>\n          )\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default KeyMapTable\n","import React from 'react'\nimport Editor from './editor/Editor.js'\nimport KeyMapTable from './editor/KeyMapTable'\nimport { Divider } from '@material-ui/core'\n\nconst containerStyle = {\n  width: '80%',\n  maxWidth: '1000px',\n  minWidth: '500px',\n  margin: '0 auto'\n}\n\nconst headingStyle = {\n  textAlign: 'center',\n  paddingTop: '30px'\n}\n\nconst componentStyle = {\n  padding: '30px'\n}\n\nfunction App () {\n  return (\n    <div style={containerStyle}>\n      <h1 style={headingStyle}>\n        {'<Editor />'}\n      </h1>\n      <div style={componentStyle}>\n        <Editor />\n      </div>\n      <Divider />\n      <h1 style={headingStyle}>\n        {'<KeyMapTable />'}\n      </h1>\n      <div style={componentStyle}>\n        <KeyMapTable />\n      </div>\n    </div>\n  )\n}\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}