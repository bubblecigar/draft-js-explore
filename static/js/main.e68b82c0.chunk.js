(this["webpackJsonprich-text-editor-survey"]=this["webpackJsonprich-text-editor-survey"]||[]).push([[0],{198:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(34),c=n.n(a),i=(n(84),n(10)),u=n(5),l=n(78),s=function(e){var t=e.type,n=e.key;return{onKeyDown:function(e,r,o){if(!e.metaKey||e.key!==n)return o();e.preventDefault(),r.toggleMark(t)}}},p=function(e){return{renderMark:function(t,n,r){return t.mark.type===e.type?e.component(t):r()}}},f=function(e){return[s(e),p(e)]},d=[].concat(Object(u.a)(f({type:"bold",key:"b",component:function(e){return o.a.createElement("strong",e.attribute,e.children)}})),Object(u.a)(f({type:"strikethrough",key:"s",component:function(e){return o.a.createElement("s",e.attribute,e.children)}})),Object(u.a)(f({type:"underline",key:"u",component:function(e){return o.a.createElement("u",e.attribute,e.children)}})),Object(u.a)(f({type:"italic",key:"i",component:function(e){return o.a.createElement("i",e.attribute,e.children)}})),Object(u.a)(f({type:"highlight",key:"h",component:function(e){return o.a.createElement("span",Object.assign({},e.attribute,{style:{background:"gold"}}),e.children)}}))),y=n(13);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v=function(e){var t=e.type,n=e.key;return{onKeyDown:function(e,r,o){if(!e.ctrlKey||e.key!==n)return o();e.preventDefault();var a=r.value.blocks.some((function(e){return e.type===t}));r.setBlocks({type:a?"paragraph":t})}}},m=function(e){var t=e.type,n=e.component;return{renderBlock:function(e,r,o){return e.node.type===t?n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)):o()}}},g=function(e){var t=e.type,n=e.key,r=e.component;return[v({type:t,key:n}),m({type:t,component:r})]},O=[].concat(Object(u.a)(g({type:"code",key:"c",component:function(e){return o.a.createElement("pre",e.attribute,o.a.createElement("code",null,e.children))}})),Object(u.a)(g({type:"header1",key:"1",component:function(e){return o.a.createElement("h1",e.attribute,e.children)}})),Object(u.a)(g({type:"header2",key:"2",component:function(e){return o.a.createElement("h2",e.attribute,e.children)}})),Object(u.a)(g({type:"header3",key:"3",component:function(e){return o.a.createElement("h3",e.attribute,e.children)}})),Object(u.a)(g({type:"header4",key:"4",component:function(e){return o.a.createElement("h4",e.attribute,e.children)}})),Object(u.a)(g({type:"header5",key:"5",component:function(e){return o.a.createElement("h5",e.attribute,e.children)}})),Object(u.a)(g({type:"header6",key:"6",component:function(e){return o.a.createElement("h6",e.attribute,e.children)}})),Object(u.a)(g({type:"quotation",key:"q",component:function(e){return o.a.createElement("blockquote",e.attribute,e.children)}}))),h=function(e){return{renderBlock:function(t,n,r){return t.isFocused?o.a.createElement("div",{style:{backgroundColor:e}},r()):r()}}},j=n(22),k=n.n(j),E=function(){return k.a.get("client-suggestionMap")||{}},w=function(e){k.a.set("client-suggestionMap",e)},x=E();function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var S=function(e){var t=e.select,n=e.firstChild,r=e.lastChild;return Object.assign({},{backgroundColor:"white",color:"gray",padding:"7px 14px 7px 7px",fontWeight:"bold",border:"1px solid transparent",cursor:"pointer"},t?{backgroundColor:"gray",color:"white",borderTop:"1px dashed white",borderBottom:"1px dashed white"}:{},n?{borderTop:"1px solid transparent"}:{},r?{borderBottom:"1px solid transparent"}:{})},P={value:[],clear:function(){P.value=[]}},C=function(e){var t=e.editor,n=o.a.useState(!1),r=Object(i.a)(n,2),a=r[0],c=r[1],u=o.a.useState(0),l=Object(i.a)(u,2),s=l[0],p=l[1],f=o.a.useState(0),d=Object(i.a)(f,2),y=d[0],b=d[1],v=o.a.useState(0),m=Object(i.a)(v,2),g=m[0],O=m[1],h=o.a.useRef(null);o.a.useEffect((function(){var e=function(e){var t=e.editor,n=e.index;return function(e){switch(e.detail.instruction){case"open":!function(){try{var e=window.getSelection().getRangeAt(0).getBoundingClientRect();b(e.left),O(e.bottom)}catch(t){console.log("uncaught caret position")}}(),p(0),c(!0);break;case"close":c(!1),p(0);break;case"incre":var r=(n+1)%P.value.length||0;p(r),h.current&&h.current.children[r].scrollIntoView({block:"nearest",inline:"nearest"});break;case"decre":var o=(n-1+P.value.length)%P.value.length||0;p(o),h.current&&h.current.children[o].scrollIntoView({block:"nearest",inline:"nearest"});break;case"enter":P.value[n]&&t.replaceLastWord(P.value[n]).insertText(" "),p(0),c(!1);break;default:console.log("unhandled event:",e)}}}({index:s,editor:t}),n=function(){return t.updateSuggestionMap()};return document.addEventListener("editorEmittedEvent",e),document.addEventListener("suggestionMapUpdated",n),function(){document.removeEventListener("editorEmittedEvent",e),document.removeEventListener("suggestionMapUpdated",n)}}),[t,s]);var j,k=function(e){return function(n){n.preventDefault(),p(e),c(!1),t.replaceLastWord(P.value[e])}},E=function(e){return function(t){t.preventDefault(),p(e)}};return P.value.length?o.a.createElement("div",{ref:h,style:(j={open:a,xOffset:y,yOffset:g},{display:j.open?"flex":"none",flexFlow:"column",overflow:"scroll",maxHeight:"136px",minWidth:"100px",position:"fixed",left:j.xOffset,top:j.yOffset,transform:"translate3d(-5px,5px,0)",border:"1px dashed gray"})},P.value.map((function(e,t){return o.a.createElement("div",{key:t,onMouseOver:E(t),onMouseDown:k(t),style:S({select:s===t,firstChild:0===t,lastChild:t===P.value.length-1})},e)}))):null},M=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{queries:{getLastWord:function(e){if(e.value.focusText){var t=e.value.focusText.text,n=e.value.selection.focus.offset;return t.slice(0,n).split("\n").join("").split(" ").reverse()[0]}return""},getSuggestionWord:function(e){return x[e.getLastWord()]||""},getSuggestionWordOf:function(e,t){return x[e.getLastWord()+t]||""},getSuggestionListOf:function(e,t){var n=e.getLastWord()+t||"";return n?n.split("").reduce((function(e,t,n){return e[0]?[e[0]+t].concat(Object(u.a)(e)):[t]}),[]).reduce((function(e,t){return x[t]?[].concat(Object(u.a)(e),[x[t]]):Object(u.a)(e)}),[]):[]}},commands:{updateSuggestionMap:function(e){x=E()},replaceLastWord:function(e,t){var n=e.getLastWord();n&&"string"===typeof t&&e.deleteBackward(n.length).insertText(t)},replaceLastWordBySuggestion:function(e){var t=e.getLastWord();if(t){var n=e.getSuggestionWord();n&&e.deleteBackward(t.length).insertText(n)}}}},{},function(){var e=function(e){return new window.CustomEvent("editorEmittedEvent",{detail:{instruction:e}})};return{onKeyDown:function(t,n,r){if(t.keyCode>=65&&t.keyCode<=90&&!t.ctrlKey&&!t.metaKey)return P.value=n.getSuggestionListOf(t.key),document.dispatchEvent(e("open")),r();if(!P.value.length)return r();switch(t.keyCode){case 38:return t.preventDefault(),void document.dispatchEvent(e("decre"));case 40:return t.preventDefault(),void document.dispatchEvent(e("incre"));case 13:return t.preventDefault(),document.dispatchEvent(e("enter")),void P.clear();default:return document.dispatchEvent(e("close")),P.clear(),r()}},onMouseDown:function(t,n,r){return document.dispatchEvent(e("close")),r()}}}(),{renderEditor:function(e,t,n){return o.a.createElement(o.a.Fragment,null,n(),o.a.createElement(C,{editor:t}))}});function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var W={display:"flex",justifyContent:"space-between"},L={},T=function(e){var t=e.active;return{margin:"10px 5px",backgroundColor:t?"gray":"transparent",color:t?"white":"black"}},F=function(e){var t=e.mouseDownHandler,n=e.styleHandler;return function(e){var r=e.editor,a=e.label;return o.a.createElement("button",{style:n(r),onMouseDown:t(r)},a)}},A=function(e){var t=e.type,n=e.label,r=e.editor;return function(e){var t=e.type;return F({mouseDownHandler:function(e){return function(n){n.preventDefault(),e.toggleMark({type:t})}},styleHandler:function(e){return e.isMarkTypeActive(t)?T({active:!0}):T({active:!1})}})}({type:t})({editor:r,label:n})},J=function(e){var t=e.type,n=e.label,r=e.editor;return function(e){var t=e.type;return F({mouseDownHandler:function(e){return function(n){n.preventDefault(),e.setBlocks({type:t})}},styleHandler:function(e){return e.isBlockTypeActive(t)?T({active:!0}):T({active:!1})}})}({type:t})({editor:r,label:n})},K=function(e){var t=e.editor;return o.a.createElement("div",{style:W},o.a.createElement("div",{style:L},o.a.createElement(A,{editor:t,type:"bold",label:"Bold"}),o.a.createElement(A,{editor:t,type:"italic",label:"Italic"}),o.a.createElement(A,{editor:t,type:"strikethrough",label:"Strike"})),o.a.createElement("div",{style:L},o.a.createElement(J,{editor:t,type:"paragraph",label:"Para..."}),o.a.createElement(J,{editor:t,type:"quotation",label:"Qua."}),o.a.createElement(J,{editor:t,type:"code",label:"<code>"})))},q=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({renderEditor:function(e,t,n){return o.a.createElement(o.a.Fragment,null,o.a.createElement(K,{editor:t}),n())}},{queries:{isBoldActive:function(e){return e.value.activeMarks.some((function(e){return"bold"===e.type}))},isItalicActive:function(e){return e.value.activeMarks.some((function(e){return"italic"===e.type}))},isStrikethroughActive:function(e){return e.value.activeMarks.some((function(e){return"strikethrough"===e.type}))},isMarkTypeActive:function(e,t){return e.value.activeMarks.some((function(e){return e.type===t}))},isCodeBlock:function(e){return e.value.blocks.some((function(e){return"code"===e.type}))},isParagraphBlock:function(e){return e.value.blocks.some((function(e){return"paragraph"===e.type}))},isQuotationBlock:function(e){return e.value.blocks.some((function(e){return"quotation"===e.type}))},isBlockTypeActive:function(e,t){return e.value.blocks.some((function(e){return e.type===t}))}}}),H={padding:"5px",textAlign:"right",backgroundColor:"lightgray",color:"white",fontFamily:'source-code-pro, Menlo, Monaco, Consolas, "Courier New",\n  monospace',fontWeight:"bold"},I=function(e){return e.split(" ").join("").split("\n").join("").length},N={renderEditor:function(e,t,n){var r=I(t.value.document.text),a=I(t.value.fragment.text);return o.a.createElement(o.a.Fragment,null,n(),o.a.createElement("div",{style:H},a," sel."),o.a.createElement("div",{style:H},r," tot."))}},R=n(3),U=function(){var e=k.a.get("slateJs-demo"),t=e?JSON.parse(e):"";return R.n.fromJSON(t||{document:{nodes:[{object:"block",type:"paragraph",nodes:[{object:"text",text:" A line of text in a paragraph."}]}]}})},Q=function(e){var t=JSON.stringify(e.value.toJSON());k.a.set("slateJs-demo",t)},V={border:"1px solid gray",padding:"7px",margin:"30px 10%"},$=[h("rgba(0,0,0,.1)")].concat(Object(u.a)(d),Object(u.a)(O),[{onKeyDown:function(e,t,n){if(9!==e.keyCode)return n();e.preventDefault(),t.insertText("    ")}},q,N,M]),z=function(e){o.a.useEffect((function(){var e=U();a(e)}),[]);var t=o.a.useState(null),n=Object(i.a)(t,2),r=n[0],a=n[1];return r?o.a.createElement("div",{style:V},o.a.createElement(l.a,{onChange:function(e){e.value.document!==r.document&&Q(e),a(e.value)},value:r,plugins:$,autoFocus:!0,placeholder:"Type something here..."})):null};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y={display:"flex",flexFlow:"row wrap",justifyContent:"center"},Z={display:"flex",flexFlow:"row",margin:"10px",border:"1px solid black"},_=function(e){var t=e.value,n=e.setState,r=o.a.useState(t),a=Object(i.a)(r,2),c=a[0],u=a[1],l=o.a.useRef();return o.a.createElement("input",{ref:l,value:c,onChange:function(e){return u(e.target.value)},onFocus:function(e){return l.current.select()},onBlur:function(e){return t===c?0:n(c)}})},ee=function(){o.a.useEffect((function(){var e=E();r(Object.keys(e)),s(Object.keys(e).map((function(t){return e[t]}))),b(Object.keys(e).map((function(e,t){return t}))),O(Object.keys(e).length)}),[]);var e=o.a.useState([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=o.a.useState([]),c=Object(i.a)(a,2),l=c[0],s=c[1],p=o.a.useState([]),f=Object(i.a)(p,2),d=f[0],b=f[1],v=o.a.useState(0),m=Object(i.a)(v,2),g=m[0],O=m[1],h=function(e,t,n){return function(r){n([].concat(Object(u.a)(t.slice(0,e)),[r],Object(u.a)(t.slice(e+1))))}},j=function(){w(function(e,t){return e.reduce((function(e,n,r){return n?X({},e,Object(y.a)({},n,t[r])):X({},e)}),{})}(n,l)),document.dispatchEvent(new window.CustomEvent("suggestionMapUpdated"))};return o.a.useEffect((function(){j()})),o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement("button",{onClick:function(){r([""].concat(Object(u.a)(n))),s([""].concat(Object(u.a)(l))),b([g].concat(Object(u.a)(d))),O(g+1)},style:{width:"50%"}},"add new shortcut")),o.a.createElement("div",{style:Y},d.map((function(e,t){return o.a.createElement("div",{key:e,style:Z},o.a.createElement("button",{onClick:(a=t,function(e){r([].concat(Object(u.a)(n.slice(0,a)),Object(u.a)(n.slice(a+1)))),s([].concat(Object(u.a)(l.slice(0,a)),Object(u.a)(l.slice(a+1)))),b([].concat(Object(u.a)(d.slice(0,a)),Object(u.a)(d.slice(a+1))))})},"x"),o.a.createElement(_,{value:n[t],setState:h(t,n,r)}),o.a.createElement(_,{value:l[t],setState:h(t,l,s)}));var a}))))};var te=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(z,null),o.a.createElement(ee,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},79:function(e,t,n){e.exports=n(198)},84:function(e,t,n){}},[[79,1,2]]]);
//# sourceMappingURL=main.e68b82c0.chunk.js.map