{"version":3,"sources":["editor/plugins/CmdKeyPlugins.js","editor/plugins/CtrlKeyPlugins.js","editor/plugins/LastWordPlugin.js","editor/plugins/SuggestionPortalPlugin.js","editor/plugins/Place.js","editor/styles/buttonStyle.js","editor/plugins/buttonMaker.js","editor/plugins/TextCountPlugin.js","editor/plugins/EditorStylePlugin.js","editor/Editor.js","editor/plugins/HighlightFocusedBlockPlugin.js","editor/plugins/TabIndentPlugin.js","editor/KeyMapTable.js","App.js","editor/static/defaultMap.js","serviceWorker.js","index.js"],"names":["CmdKeyMark","options","type","key","onKeyDown","e","editor","next","metaKey","preventDefault","toggleMark","RenderMark","renderMark","props","mark","component","CmdMarkPlugin","CmdKeyPlugins","attribute","children","style","background","CtrlKeyBlock","ctrlKey","isType","value","blocks","some","block","setBlocks","RenderBlock","renderBlock","node","ctrlKeyPlugin","CtrlKeyPlugins","LastWordPlugin","queries","getLastWord","focusText","text","focusOffset","selection","focus","offset","slice","split","join","reverse","commands","replaceLastWord","newWord","lastWord","deleteBackward","length","insertText","optionStyle","select","firstChild","lastChild","Object","assign","backgroundColor","color","padding","fontWeight","border","cursor","borderTop","borderBottom","SuggestionPortalPlugin","suggestionMap","suggestionList","clear","Portal","React","useState","open","setOpen","index","setIndex","xOffset","setXOffset","yOffset","setYOffset","portalRef","useRef","useEffect","editorEventHandler","detail","instruction","rect","window","getSelection","getRangeAt","getBoundingClientRect","left","bottom","console","log","updatePortalPosition","newIndex","current","scrollIntoView","inline","handleEditor","document","addEventListener","removeEventListener","onMouseDown","onMouseOver","ref","display","flexFlow","overflow","maxHeight","minWidth","position","top","transform","map","option","i","editorEmittedEvent","CustomEvent","keyCode","list","lastword","reduceRight","acc","char","reduce","getSuggestionlist","dispatchEvent","EventDispatcher","renderEditor","bar","justifyContent","alignItems","side","Place","topLeftItems","topRightItems","bottomLeftItems","bottomRightItems","item","toggleButtonStyle","active","mouseover","margin","fontFamily","makeButton","mouseDownHandler","styleHandler","label","createMarkButton","activeMarks","isMarkTypeActive","makeToggleMarkButton","createBlockButton","isBlockTypeActive","makeSetBlockButton","textAlign","calLength","str","EditorStylePlugin","export","staticPlugins","isFocused","HighlightFocusedBlockPlugin","onClick","totalText","selectedText","fragment","H2oEditor","content","setContent","plugins","setPlugins","setValue","onChange","change","autoFocus","tableStyle","height","pairStyle","inputStyle","width","outline","buttonStyle","deleteButtonStyle","Input","setState","v","setV","setIsFocused","inputRef","target","onFocus","onBlur","KeyMapTable","setSuggestionMap","keys","setKeys","vals","setVals","uids","setUids","nextId","setNextId","setStateBy","field","setter","newVal","bind","uid","containerStyle","maxWidth","headingStyle","paddingTop","componentStyle","paddingBottom","storedMap","AMI","CHD","CHF","storedContent","storedJsonStr","store","get","json","JSON","parse","Value","fromJSON","nodes","object","getContent","App","set","jsonStr","stringify","Divider","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ac3429cb.chunk.js","sourcesContent":["import React from 'react'\n\nconst CmdKeyMark = options => {\n  const { type, key } = options\n  return {\n    onKeyDown: (e, editor, next) => {\n      if (!e.metaKey || !(e.key === key)) {\n        return next()\n      }\n      e.preventDefault()\n      editor.toggleMark(type)\n    }\n  }\n}\nconst RenderMark = options => {\n  return {\n    renderMark: (props, editor, next) => {\n      if (props.mark.type === options.type) {\n        return options.component(props)\n      } else {\n        return next()\n      }\n    }\n  }\n}\nconst CmdMarkPlugin = options => [\n  CmdKeyMark(options),\n  RenderMark(options)\n]\n\nconst CmdKeyPlugins = [\n  ...CmdMarkPlugin({\n    type: 'bold',\n    key: 'b',\n    component: props => (\n      <strong {...props.attribute}>{props.children}</strong>\n    )\n  }),\n  ...CmdMarkPlugin({\n    type: 'strikethrough',\n    key: 's',\n    component: props => (\n      <s {...props.attribute}>{props.children}</s>\n    )\n  }),\n  ...CmdMarkPlugin({\n    type: 'underline',\n    key: 'u',\n    component: props => (\n      <u {...props.attribute}>{props.children}</u>\n    )\n  }),\n  ...CmdMarkPlugin({\n    type: 'italic',\n    key: 'i',\n    component: props => (\n      <i {...props.attribute}>{props.children}</i>\n    )\n  }),\n  ...CmdMarkPlugin({\n    type: 'highlight',\n    key: 'h',\n    component: props => (\n      <span {...props.attribute} style={{ background: 'gold' }}>{props.children}</span>\n    )\n  })\n]\n\nexport default CmdKeyPlugins\n","import React from 'react'\n\nconst CtrlKeyBlock = options => {\n  const { type, key } = options\n  return {\n    onKeyDown: (e, editor, next) => {\n      if (!e.ctrlKey || !(e.key === key)) {\n        return next()\n      }\n      e.preventDefault()\n      const isType = editor.value.blocks.some(block => block.type === type)\n      editor.setBlocks({ type: isType ? 'paragraph' : type })\n    }\n  }\n}\n\nconst RenderBlock = options => {\n  const { type, component } = options\n  return {\n    renderBlock: (props, editor, next) => {\n      if (props.node.type === type) {\n        return component({ ...props })\n      } else {\n        return next()\n      }\n    }\n  }\n}\nconst ctrlKeyPlugin = ({ type, key, component }) => {\n  return [\n    CtrlKeyBlock({ type, key }),\n    RenderBlock({ type, component })\n  ]\n}\n\nconst CtrlKeyPlugins = [\n  ...ctrlKeyPlugin({\n    type: 'code',\n    key: 'c',\n    component: props => (\n      <pre {...props.attribute}>\n        <code>{props.children}</code>\n      </pre>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header1',\n    key: '1',\n    component: props => (\n      <h1 {...props.attribute}>\n        {props.children}\n      </h1>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header2',\n    key: '2',\n    component: props => (\n      <h2 {...props.attribute}>\n        {props.children}\n      </h2>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header3',\n    key: '3',\n    component: props => (\n      <h3 {...props.attribute}>\n        {props.children}\n      </h3>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header4',\n    key: '4',\n    component: props => (\n      <h4 {...props.attribute}>\n        {props.children}\n      </h4>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header5',\n    key: '5',\n    component: props => (\n      <h5 {...props.attribute}>\n        {props.children}\n      </h5>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'header6',\n    key: '6',\n    component: props => (\n      <h6 {...props.attribute}>\n        {props.children}\n      </h6>\n    )\n  }),\n  ...ctrlKeyPlugin({\n    type: 'quotation',\n    key: 'q',\n    component: props => (\n      <blockquote {...props.attribute}>\n        {props.children}\n      </blockquote>\n    )\n  })\n]\n\nexport default CtrlKeyPlugins\n","const LastWordPlugin = {\n  queries: {\n    getLastWord: editor => {\n      if (editor.value.focusText) {\n        const text = editor.value.focusText.text\n        const focusOffset = editor.value.selection.focus.offset\n        const tail = text.slice(0, focusOffset).split('\\n').join('').split(' ').reverse()[0]\n        return tail\n      }\n      return ''\n    }\n  },\n  commands: {\n    replaceLastWord: (editor, newWord) => {\n      const lastWord = editor.getLastWord()\n      if (!lastWord) {\n        return\n      }\n      if (typeof newWord !== 'string') {\n        return\n      }\n      editor.deleteBackward(lastWord.length).insertText(newWord)\n    }\n  }\n}\nexport default LastWordPlugin\n","import React from 'react'\nimport LastWordPlugin from './LastWordPlugin'\n\nconst portalStyle = ({ open, xOffset, yOffset }) => ({\n  display: open ? 'flex' : 'none',\n  flexFlow: 'column',\n  overflow: 'scroll',\n  maxHeight: '136px',\n  minWidth: '100px',\n\n  position: 'fixed',\n  left: xOffset,\n  top: yOffset,\n  transform: 'translate3d(-5px,5px,0)',\n\n  border: '1px dashed gray'\n})\n\nconst optionStyle = ({ select, firstChild, lastChild }) => {\n  const baseStyle = {\n    backgroundColor: 'white',\n    color: 'gray',\n    padding: '7px 14px 7px 7px',\n    fontWeight: 'bold',\n    border: '1px solid transparent',\n    cursor: 'pointer'\n  }\n  const selectStyle = {\n    backgroundColor: 'gray',\n    color: 'white',\n    borderTop: '1px dashed white',\n    borderBottom: '1px dashed white'\n  }\n  const lastStyle = {\n    borderBottom: '1px solid transparent'\n  }\n  const firstStyle = {\n    borderTop: '1px solid transparent'\n  }\n  return Object.assign(\n    {},\n    baseStyle,\n    select ? selectStyle : {},\n    firstChild ? firstStyle : {},\n    lastChild ? lastStyle : {}\n  )\n}\n\nconst getSuggestionlist = (lastword, map) => (!lastword ? [] : lastword.split('').reduceRight(\n  (acc, char, i) => (\n    acc[0] ? [char + acc[0], ...acc] : [char]\n  ), []\n).reduce(\n  (acc, key) => (\n    map[key] ? [...acc, map[key]] : [...acc]\n  ), []\n))\n\nconst SuggestionPortalPlugin = suggestionMap => {\n  // sharing data between Portal and EventDispatcher\n  const suggestionList = {\n    value: [],\n    clear: () => { suggestionList.value = [] }\n  }\n\n  const Portal = ({ editor }) => {\n    // portal state, listen to editor\n    const [open, setOpen] = React.useState(false)\n    const [index, setIndex] = React.useState(0)\n\n    // portal position\n    const [xOffset, setXOffset] = React.useState(0)\n    const [yOffset, setYOffset] = React.useState(0)\n    const portalRef = React.useRef(null)\n\n    const updatePortalPosition = () => {\n      try {\n        const rect = window.getSelection().getRangeAt(0).getBoundingClientRect()\n        setXOffset(rect.left)\n        setYOffset(rect.bottom)\n      } catch {\n        console.log('uncaught caret position')\n      }\n    }\n\n    React.useEffect(\n      () => {\n        const handleEditor = ({ editor, index }) => e => {\n          switch (e.detail.instruction) {\n            case 'open': {\n              updatePortalPosition()\n              setIndex(0)\n              setOpen(true)\n              break\n            }\n            case 'close': {\n              setOpen(false)\n              setIndex(0)\n              break\n            }\n            case 'incre': {\n              const newIndex = (index + 1) % suggestionList.value.length || 0\n              setIndex(newIndex)\n              portalRef.current && portalRef.current.children[newIndex].scrollIntoView({\n                block: 'nearest',\n                inline: 'nearest'\n              })\n              break\n            }\n            case 'decre': {\n              const newIndex = (index - 1 + suggestionList.value.length) % suggestionList.value.length || 0\n              setIndex(newIndex)\n              portalRef.current && portalRef.current.children[newIndex].scrollIntoView({\n                block: 'nearest',\n                inline: 'nearest'\n              })\n              break\n            }\n            case 'enter': {\n              const suggestion = suggestionList.value[index]\n              if (suggestion) {\n                editor.replaceLastWord(suggestionList.value[index]).insertText(' ')\n              }\n              setIndex(0)\n              setOpen(false)\n              break\n            }\n            default: {\n              console.log('unhandled event:', e)\n              break\n            }\n          }\n        }\n        const editorEventHandler = handleEditor({ index, editor })\n        document.addEventListener('editorEmittedEvent', editorEventHandler)\n        return () => {\n          document.removeEventListener('editorEmittedEvent', editorEventHandler)\n        }\n      }, [editor, index] // update callback behavior when index or editor change\n    )\n\n    const onMouseDown = index => e => {\n      e.preventDefault()\n      setIndex(index)\n      setOpen(false)\n      editor.replaceLastWord(suggestionList.value[index])\n    }\n    const onMouseOver = index => e => {\n      e.preventDefault()\n      setIndex(index)\n    }\n\n    return (\n      suggestionList.value.length\n        ? (\n          <div\n            ref={portalRef}\n            style={portalStyle({\n              open,\n              xOffset,\n              yOffset\n            })}\n          >\n            {\n              suggestionList.value.map(\n                (option, i) => (\n                  <div\n                    key={i}\n                    onMouseOver={onMouseOver(i)}\n                    onMouseDown={onMouseDown(i)}\n                    style={optionStyle({\n                      select: index === i,\n                      firstChild: i === 0,\n                      lastChild: i === suggestionList.value.length - 1\n                    })}\n                  >\n                    {option}\n                  </div>\n                )\n              )\n            }\n          </div>\n        )\n        : null\n    )\n  }\n\n  const EventDispatcher = () => {\n    const editorEmittedEvent = instruction => (\n      new window.CustomEvent('editorEmittedEvent', { detail: { instruction } })\n    )\n\n    const onKeyDown = (e, editor, next) => {\n      if (e.keyCode >= 65 && e.keyCode <= 90 && !e.ctrlKey && !e.metaKey) {\n      // a-65 z-90\n        const lastword = editor.getLastWord() + e.key || ''\n        const list = getSuggestionlist(lastword, suggestionMap)\n        suggestionList.value = list\n        document.dispatchEvent(editorEmittedEvent('open'))\n        return next()\n      } else if (suggestionList.value.length) {\n        switch (e.keyCode) {\n          case 38: { // up\n            e.preventDefault()\n            document.dispatchEvent(editorEmittedEvent('decre'))\n            return\n          }\n          case 40: { // down\n            e.preventDefault()\n            document.dispatchEvent(editorEmittedEvent('incre'))\n            return\n          }\n          case 13: { // enter\n            e.preventDefault()\n            document.dispatchEvent(editorEmittedEvent('enter'))\n            suggestionList.clear()\n            return\n          }\n          default: {\n            document.dispatchEvent(editorEmittedEvent('close'))\n            suggestionList.clear()\n            return next()\n          }\n        }\n      } else {\n        return next()\n      }\n    }\n\n    const onMouseDown = (e, editor, next) => {\n      document.dispatchEvent(editorEmittedEvent('close'))\n      return next()\n    }\n\n    return ({ onKeyDown, onMouseDown })\n  }\n\n  return ({\n    ...LastWordPlugin,\n    ...EventDispatcher(),\n    renderEditor: (props, editor, next) => (\n      <>\n        {next()}\n        <Portal editor={editor} />\n      </>\n    )\n  })\n}\n\nexport default SuggestionPortalPlugin\n","import React from 'react'\n\nconst bar = {\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center'\n}\n\nconst side = {\n  display: 'flex'\n}\n\nconst Place = ({\n  topLeftItems,\n  topRightItems,\n  bottomLeftItems,\n  bottomRightItems\n}) => ({\n  renderEditor: (props, editor, next) => {\n    return (\n      <>\n        <div style={bar}>\n          <div style={side}>\n            {topLeftItems.map(\n              (item, i) => (\n                <div key={i}>\n                  {item(editor)}\n                </div>\n              )\n            )}\n          </div>\n          <div style={side}>\n            {topRightItems.map(\n              (item, i) => (\n                <div key={i}>\n                  {item(editor)}\n                </div>\n              )\n            )}\n          </div>\n        </div>\n        {next()}\n        <div style={bar}>\n          <div style={side}>\n            <div style={side}>\n              {bottomLeftItems.map(\n                (item, i) => (\n                  <div key={i}>\n                    {item(editor)}\n                  </div>\n                )\n              )}\n            </div>\n          </div>\n          <div style={side}>\n            <div style={side}>\n              {bottomRightItems.map(\n                (item, i) => (\n                  <div key={i}>\n                    {item(editor)}\n                  </div>\n                )\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    )\n  }\n})\n\nexport default Place\n","export const toggleButtonStyle = ({ active, mouseover }) => ({\n  margin: '10px 5px',\n  backgroundColor: active ? 'gray' : 'transparent',\n  color: active ? 'white' : 'black',\n  fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",monospace',\n  fontWeight: 'bold',\n  padding: '5px',\n  border: 0,\n  cursor: 'pointer'\n})\n","import React from 'react'\nimport { toggleButtonStyle } from '../styles/buttonStyle'\n\nconst isMarkTypeActive = (editor, type) => editor.value.activeMarks.some(mark => mark.type === type)\nconst isBlockTypeActive = (editor, type) => editor.value.blocks.some(block => block.type === type)\n\nconst makeButton = ({ mouseDownHandler, styleHandler }) => ({ editor, label }) => (\n  <button\n    style={styleHandler(editor)}\n    onMouseDown={mouseDownHandler(editor)}\n  >\n    {label}\n  </button>\n)\nconst makeToggleMarkButton = ({ type }) => makeButton({\n  mouseDownHandler: editor => e => {\n    e.preventDefault()\n    editor.toggleMark({ type })\n  },\n  styleHandler: editor => isMarkTypeActive(editor, type)\n    ? toggleButtonStyle({ active: true })\n    : toggleButtonStyle({ active: false })\n})\nconst createMarkButton = ({ type, label }) => editor => makeToggleMarkButton({ type })({ editor, label })\n\nconst makeSetBlockButton = ({ type }) => makeButton({\n  mouseDownHandler: editor => e => {\n    e.preventDefault()\n    editor.setBlocks({ type })\n  },\n  styleHandler: editor => isBlockTypeActive(editor, type)\n    ? toggleButtonStyle({ active: true })\n    : toggleButtonStyle({ active: false })\n})\nconst createBlockButton = ({ type, label }) => editor => (\n  makeSetBlockButton({ type })({ editor, label })\n)\n\nexport { createMarkButton, createBlockButton }\n","import React from 'react'\n\nconst style = {\n  padding: '5px',\n  textAlign: 'right',\n  color: 'gray',\n  fontFamily: `source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",\n  monospace`,\n  fontWeight: 'bold'\n}\n\nconst calLength = str => str.split(' ').join('').split('\\n').join('').length\n\nconst textCounter = editor => {\n  const totalText = calLength(editor.value.document.text)\n  const selectedText = calLength(editor.value.fragment.text)\n  return (\n    <div style={style}>\n      <span>{selectedText} sel /</span>\n      <span> {totalText} tot</span>\n    </div>\n  )\n}\n\nconst TextCountPlugin = {\n  renderEditor: (props, editor, next) => {\n    const totalText = calLength(editor.value.document.text)\n    const selectedText = calLength(editor.value.fragment.text)\n    return (\n      <>\n        {next()}\n        <div style={style}>\n          <span>{selectedText} sel /</span>\n          <span> {totalText} tot</span>\n        </div>\n      </>\n    )\n  }\n}\n\nexport default TextCountPlugin\nexport { textCounter }\n","import React from 'react'\n\nconst EditorStylePlugin = style => ({\n  renderEditor: (props, editor, next) => {\n    return (\n      <div style={style}>\n        {next()}\n      </div>\n    )\n  }\n})\n\nexport default EditorStylePlugin\n","// core\nimport React from 'react'\nimport { Editor } from 'slate-react'\n\n// plugins\n/* ------ KeyBinding ------- */\nimport CmdKeyPlugins from './plugins/CmdKeyPlugins'\nimport CtrlKeyPlugins from './plugins/CtrlKeyPlugins'\nimport TabIndentPlugin from './plugins/TabIndentPlugin'\n\n/* ------ Decoration ------- */\nimport HighlightFocusedBlockPlugin from './plugins/HighlightFocusedBlockPlugin'\n\n/* ------ Suggestion ------- */\nimport SuggestionPortalPlugin from './plugins/SuggestionPortalPlugin'\n\n/* ---------  GUI  --------- */\nimport Place from './plugins/Place'\nimport { createMarkButton, createBlockButton } from './plugins/buttonMaker'\nimport { textCounter } from './plugins/TextCountPlugin'\n\n/* ---------  CSS  --------- */\nimport EditorStylePlugin from './plugins/EditorStylePlugin'\nimport { toggleButtonStyle } from './styles/buttonStyle'\n\n// global ref for plugin to access internal data of the component\nconst ref = { export: null }\n\nconst staticPlugins = [\n  HighlightFocusedBlockPlugin('rgba(0,0,0,.05)'),\n  ...CmdKeyPlugins,\n  ...CtrlKeyPlugins,\n  TabIndentPlugin,\n  Place({\n    topLeftItems: [\n      createMarkButton({\n        type: 'bold',\n        label: 'Bold'\n      }),\n      createMarkButton({\n        type: 'italic',\n        label: 'Italic'\n      }),\n      createMarkButton({\n        type: 'strikethrough',\n        label: 'Strike'\n      })\n    ],\n    topRightItems: [\n      createBlockButton({\n        type: 'paragraph',\n        label: 'Para...'\n      }),\n      createBlockButton({\n        type: 'code',\n        label: '<Code />'\n      }),\n      createBlockButton({\n        type: 'quotation',\n        label: '\"Quate\"'\n      })\n    ],\n    bottomLeftItems: [\n      editor => {\n        const save = () => ref.export ? ref.export() : null\n        return (\n          <button\n            style={toggleButtonStyle({})}\n            onClick={save}\n          > > Save\n          </button>\n        )\n      }\n    ],\n    bottomRightItems: [\n      textCounter\n    ]\n  }),\n  EditorStylePlugin({\n    border: '1px solid lightgray',\n    padding: '7px'\n  })\n]\n\nconst H2oEditor = ({ suggestionMap, content, setContent }) => {\n  // plugins\n  const [plugins, setPlugins] = React.useState(staticPlugins)\n  // dynamically update suggestion plugin\n  React.useEffect(\n    () => {\n      if (suggestionMap) {\n        setPlugins([...staticPlugins, SuggestionPortalPlugin(suggestionMap)])\n      }\n    }, [suggestionMap]\n  )\n\n  // internal data: value, external data: content\n  const [value, setValue] = React.useState(content)\n  // sync internal & external data\n  React.useEffect(\n    () => {\n      setValue(content)\n    }, [content]\n  )\n  // export internal data\n  React.useEffect(\n    () => {\n      // pass the hook for plugin to trigger exporting behavior\n      ref.export = () => setContent(value)\n    }, [value, setContent]\n  )\n\n  const onChange = change => {\n    // update editor\n    setValue(change.value)\n  }\n\n  return value ? (\n    <Editor\n      onChange={onChange}\n      value={value}\n      plugins={plugins}\n      autoFocus\n    />\n  ) : null\n}\n\nexport default H2oEditor\n","import React from 'react'\n\nconst HighlightFocusedBlockPlugin = backgroundColor => (\n  {\n    renderBlock: (props, editor, next) => {\n      return props.isFocused ? (\n        <div style={{ backgroundColor }}>\n          {next()}\n        </div>) : next()\n    }\n  }\n)\nexport default HighlightFocusedBlockPlugin\n","export default {\n  onKeyDown: (e, editor, next) => {\n    if (e.keyCode !== 9) {\n      return next()\n    }\n    e.preventDefault()\n    editor.insertText('    ')\n  }\n}\n","import React from 'react'\n\nconst tableStyle = {\n  display: 'flex',\n  flexFlow: 'column wrap',\n  height: '500px',\n  alignItems: 'center',\n  margin: '10px 0px',\n  overflow: 'scroll',\n  border: '1px solid lightgray'\n}\nconst pairStyle = {\n  display: 'flex',\n  flexFlow: 'row',\n  margin: '10px'\n}\nconst inputStyle = type => ({\n  width: type === 'key' ? '100px' : '200px',\n  textAlign: 'center',\n  padding: '7px',\n  margin: '3px',\n  fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",monospace',\n  fontWeight: 'bold',\n  border: '0',\n  borderBottom: '1px solid gray',\n  outline: 'none'\n})\nconst buttonStyle = {\n  margin: '10px 5px',\n  fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",monospace',\n  fontWeight: 'bold',\n  padding: '5px',\n  border: 0,\n  cursor: 'pointer'\n}\nconst deleteButtonStyle = {\n  backgroundColor: 'transparent',\n  border: '0',\n  color: 'indianRed',\n  cursor: 'pointer',\n  fontWeight: 'bold'\n}\n\nconst Input = ({ value, setState, style }) => {\n  // internal data: v, external data: value\n  const [v, setV] = React.useState(value)\n  const [isFocused, setIsFocused] = React.useState(false)\n  const inputRef = React.useRef()\n\n  const onChange = e => setV(e.target.value)\n  const onFocus = e => {\n    inputRef.current.select()\n    setIsFocused(true)\n  }\n  // export internal data\n  const onBlur = e => {\n    if (value !== v) {\n      setState(v)\n    }\n    setIsFocused(false)\n  }\n\n  return (\n    <input\n      style={{\n        ...style,\n        backgroundColor: isFocused ? 'rgba(0,0,0,.05)' : 'white'\n      }}\n      ref={inputRef}\n      value={v}\n      onChange={onChange}\n      onFocus={onFocus}\n      onBlur={onBlur}\n    />\n  )\n}\n\nconst KeyMapTable = ({ suggestionMap, setSuggestionMap }) => {\n  // internal suggestion data\n  const [keys, setKeys] = React.useState(null)\n  const [vals, setVals] = React.useState(null)\n  const [uids, setUids] = React.useState(null)\n  const [nextId, setNextId] = React.useState(null)\n\n  // sync internal data and external data\n  React.useEffect(\n    () => {\n      if (suggestionMap) {\n        // flatten suggestionMap to keys[] : vals[] pair\n        setKeys(Object.keys(suggestionMap))\n        setVals(Object.keys(suggestionMap).map(key => suggestionMap[key]))\n        // dynamic generate unique keyId for new pair\n        setUids(Object.keys(suggestionMap).map((key, i) => i))\n        setNextId(Object.keys(suggestionMap).length)\n      }\n    }, [suggestionMap]\n  )\n\n  const setStateBy = (index, field, setter) => newVal => {\n    setter([...field.slice(0, index), newVal, ...field.slice(index + 1)])\n  }\n\n  const deletePair = index => e => {\n    setKeys([...keys.slice(0, index), ...keys.slice(index + 1)])\n    setVals([...vals.slice(0, index), ...vals.slice(index + 1)])\n    setUids([...uids.slice(0, index), ...uids.slice(index + 1)])\n  }\n\n  const addPair = () => {\n    setKeys(['', ...keys])\n    setVals(['', ...vals])\n    setUids([nextId, ...uids])\n    setNextId(nextId + 1)\n  }\n\n  // bind keys[] : vals[] pair to generate new suggestionMap\n  const bind = (keys, vals) => keys.reduce(\n    (acc, key, i) => (\n      key ? { ...acc, [key]: vals[i] } : { ...acc }\n    ), {}\n  )\n\n  const exportMap = () => setSuggestionMap(bind(keys, vals))\n\n  return uids ? (\n    <div>\n      <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\n        <button onClick={addPair} style={buttonStyle}>+ add new shortcut</button>\n        <button onClick={exportMap} style={buttonStyle}>> save shortcuts</button>\n      </div>\n      <div style={tableStyle}>\n        {uids.map(\n          (uid, i) => (\n            <div key={uid} style={pairStyle}>\n              <button\n                style={deleteButtonStyle}\n                onClick={deletePair(i)}\n              >-\n              </button>\n              <Input\n                style={inputStyle('key')}\n                value={keys[i]}\n                setState={setStateBy(i, keys, setKeys)}\n              />\n              <Input\n                style={inputStyle('val')}\n                value={vals[i]}\n                setState={setStateBy(i, vals, setVals)}\n              />\n            </div>\n          )\n        )}\n      </div>\n    </div>\n  ) : null\n}\n\nexport default KeyMapTable\n","import React from 'react'\nimport H2oEditor from './editor/Editor.js'\nimport KeyMapTable from './editor/KeyMapTable'\nimport { Divider } from '@material-ui/core'\n\n// for importer and exporter\nimport store from 'store-js'\nimport { Value } from 'slate'\nimport defaultMap from './editor/static/defaultMap.js'\n\nconst containerStyle = {\n  width: '80%',\n  maxWidth: '1000px',\n  minWidth: '500px',\n  margin: '0 auto'\n}\n\nconst headingStyle = {\n  textAlign: 'center',\n  paddingTop: '30px',\n  fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",monospace'\n}\n\nconst componentStyle = {\n  padding: '30px',\n  paddingBottom: '60px'\n}\n\nconst getContent = () => {\n  const storedJsonStr = store.get('slateJs-demo') // json || undefined\n  const json = storedJsonStr ? JSON.parse(storedJsonStr) : ''\n  const initialValue = Value.fromJSON(json || {\n    document: {\n      nodes: [\n        {\n          object: 'block',\n          type: 'paragraph',\n          nodes: [\n            {\n              object: 'text',\n              text: ''\n            }\n          ]\n        }\n      ]\n    }\n  })\n  return initialValue\n}\n\nconst storedMap = defaultMap\nconst storedContent = getContent()\n\nfunction App () {\n  // map data\n  const [suggestionMap, setSuggestionMap] = React.useState(null)\n  // init map data\n  React.useEffect(\n    () => {\n      const storedMap = store.get('h2O-editor-suggestionMap')\n      setSuggestionMap(storedMap || {})\n    }, []\n  )\n  // export map data\n  React.useEffect(\n    () => {\n      if (suggestionMap !== storedMap) {\n        store.set('h2O-editor-suggestionMap', suggestionMap)\n      }\n    }, [suggestionMap]\n  )\n\n  // content\n  const [content, setContent] = React.useState(null)\n  // init content\n  React.useEffect(\n    () => {\n      setContent(storedContent)\n    }, []\n  )\n  // export content\n  React.useEffect(\n    () => {\n      if (content && content.document !== storedContent.document) {\n        const jsonStr = JSON.stringify(content)\n        store.set('slateJs-demo', jsonStr)\n      }\n    }, [content]\n  )\n\n  return (\n    <div style={containerStyle}>\n      <h1 style={headingStyle}>\n        {'<Editor />'}\n      </h1>\n      <div style={componentStyle}>\n        <H2oEditor\n          suggestionMap={suggestionMap}\n          content={content}\n          setContent={setContent}\n        />\n      </div>\n      <Divider />\n      <h1 style={headingStyle}>\n        {'<KeyMapTable />'}\n      </h1>\n      <div style={componentStyle}>\n        <KeyMapTable\n          suggestionMap={suggestionMap}\n          setSuggestionMap={setSuggestionMap}\n        />\n      </div>\n    </div>\n  )\n}\nexport default App\n","const map = {\n  AMI: 'Acute Myocardial Infarction',\n  CHD: 'Congenital Heart Disease',\n  CHF: 'Congenital Heart Failure'\n  // AF: 'Atrial Flutter',\n  // Af: 'Atrial Fibrillation',\n  // VF: 'Ventricular Flutter',\n  // VT: 'Ventricular Tachycardia',\n  // CAD: 'Coronary Artery Disease',\n  // 'H/T': 'Hypertension',\n  // RHD: 'Rheumatic Heart Disease',\n  // SLE: 'Systemic Lupus Erythematosus',\n  // DIC: 'Disseminated Intravascular Coagulation',\n  // COPD: 'Chronic Obstructive  Pulmonary  Disease',\n  // PE: 'Pulmonary Embolism ',\n  // SOB: 'short of breath',\n  // URI: 'Upper Respiratory Infection',\n  // ARF: 'Acute Renal Failure',\n  // 'App.': 'Appendicitis',\n  // HHNK: 'Hyperglycemic Hyperosmolar Nonketolytic Coma',\n  // DM: 'diabetes mellitus',\n  // CP: 'Cerebral Palsy',\n  // IICP: 'Increased Intracranial Pressure',\n  // HIVD: 'Herniation of Intervertebral Disc',\n  // MS: 'Multiple Sclerosis',\n  // MG: 'Myasthenic Ggravis',\n  // RA: 'Rreumatoid Arthritis',\n  // BPH: 'benign prostatic hypertrophy',\n  // UTI: 'Urinary Tract Infection',\n  // NPC: 'Nasopharyngeal Carcinoma',\n  // CPS: 'Chronic paranasal sinusitis',\n  // RD: 'Retinal Detachment',\n  // IVF: 'In Vitro Fertilization',\n  // AFE: 'Amniotic Fluid Embolism',\n  // VD: 'Venereal Disease',\n  // PROM: 'Premature Rupture of  Membrane',\n  // RDS: 'Respiratory Distress Syndrome',\n  // SAH: 'Subarachnoid Hemorrhage',\n  // LE: 'Lupus erythematosus',\n  // TB: 'Tuberculosis',\n  // Ca: 'potassium',\n  // CPN: 'chronic pyelonephritis ',\n  // DOA: 'dead on arrival',\n  // DOE: 'dyspnea on exercise',\n  // AGN: 'Acute Glomerulenephritis',\n  // LP: 'Lumbar Puncture',\n  // THR: 'Total Hip Replacement',\n  // 'D&C': 'Dilatation and Curettage',\n  // 'D&E': 'Dilatation and Evacuation',\n  // EP: 'Episiotomy',\n  // CVP: 'central venous pressure',\n  // 'B.T.': 'Transfusion',\n  // GCS: 'Glasgow Coma scale',\n  // ROM: 'Range of  Motion',\n  // PP: 'Postpartum',\n  // 'C/S': 'Cesarean Section',\n  // NSD: 'Normal Spontaneous Delivery',\n  // AAD: 'against-advice discharge',\n  // BW: 'body  weight',\n  // CC: 'chief complaint',\n  // CO: 'cardiac output',\n  // CPR: 'cardiopulmonary resuscitation',\n  // BH: 'body height',\n  // OU: 'Oculus Uterque',\n  // OS: 'Oculus Sinister',\n  // OD: ' Oculus Dexter',\n  // 'I&O': 'Intake and output'\n}\n\nexport default map\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}